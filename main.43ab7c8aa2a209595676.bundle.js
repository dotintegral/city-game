(()=>{"use strict";var e,t={500:(e,t,n)=>{n(260);const s="MainScene",a="UIScene",i={tiles:{green:"assets/tiles/green.png",yellow:"assets/tiles/yellow.png"},buildings:{house1:"assets/buildings/house1.png",block1:"assets/buildings/block1.png"}},o={mode:"view",modeData:void 0},r=Phaser.Input.Events;class l extends Phaser.GameObjects.Image{constructor({scene:e,x:t,y:n,zIndex:s}){super(e,t,n,i.tiles.green),this.scene=e,this.zIndex=s,this.x=t,this.y=n,this.originX=0,this.originY=1,this.updateDisplayOrigin(),this.setDepth(s+0),this.setInteractive({pixelPerfect:!0,alphaTolerance:1}),this.buildEvents=(e=>({onPointerOver:()=>{var t;"build"===o.mode&&void 0===e.content&&(e.overlay=e.scene.add.image(e.x,e.y,(null===(t=o.modeData)||void 0===t?void 0:t.buildable.sprite)||""),e.overlay.setOrigin(0,1),e.overlay.setAlpha(.5),e.overlay.setDepth(e.zIndex+1000001))},onPointerOut:()=>{var t;(null===(t=e.overlay)||void 0===t?void 0:t.destroy)&&(e.overlay.destroy(),e.overlay=void 0)},onPointerDown:()=>{var t,n;"build"===o.mode&&void 0===e.content&&(null===(t=e.overlay)||void 0===t||t.destroy(),e.overlay=void 0,e.content=e.scene.add.image(e.x,e.y,(null===(n=o.modeData)||void 0===n?void 0:n.buildable.sprite)||""),e.content.setOrigin(0,1),e.content.setDepth(e.zIndex+5))}}))(this),this.on(r.POINTER_OVER,(()=>{this.buildEvents.onPointerOver()})),this.on(r.POINTER_OUT,(()=>{this.buildEvents.onPointerOut()})),this.on(r.POINTER_DOWN,(()=>{this.buildEvents.onPointerDown()})),this.scene.add.existing(this)}}const c={type:"tile"},d=[];for(let e=0;e<32;e++){d.push([]);for(let t=0;t<32;t++)d[e].push(Object.assign({},c))}console.log({map:d});class h extends Phaser.Scene{constructor(){super({key:s})}create(){this.keyBindings=(e=>{const t={};return{bindKeys:()=>{e.input.keyboard.on("keydown",(({key:e})=>{t[e]=!0})).on("keyup",(({key:e})=>{t[e]=!1})),e.input.on("wheel",((t,n,s,a,i,o)=>{a>0?e.cameras.main.zoom>.2&&(e.cameras.main.zoom-=.1):a<0&&e.cameras.main.zoom<2&&(e.cameras.main.zoom+=.1)}))},handleCameraMovement:()=>{t.w?e.cameras.main.scrollY-=10:t.s&&(e.cameras.main.scrollY+=10),t.a?e.cameras.main.scrollX-=10:t.d&&(e.cameras.main.scrollX+=10)}}})(this),this.createTiles(),this.keyBindings.bindKeys()}createTiles(){const e=this.cameras.main.width/2;d.forEach(((t,n)=>{const s=e-32*n,a=100+16*n;t.forEach(((e,t)=>{new l({scene:this,x:s+32*t,y:a+16*t,tileInfo:e,zIndex:10*(n+t+1)})}))}))}update(){this.keyBindings.handleCameraMovement()}}const u=e=>Object.keys(e).flatMap((t=>{const n=e[t];return"object"==typeof n?u(n):n}));class m extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){u(i).forEach((e=>{this.load.image(e,e)}))}create(){this.scene.start(s),this.scene.start(a)}}const p={buildings:{house1:{sprite:i.buildings.house1,name:"House 1"},block1:{sprite:i.buildings.block1,name:"Block 1"}}},v=({name:e,caption:t,callback:n})=>{const s=document.createElement("div");return s.className="leftMenuButton",s.innerText=t,s.addEventListener("click",n),s},b=e=>({create:()=>{(e=>{const t=document.createElement("div");t.className="leftMenuWrapper";const n=document.createElement("div");n.className="leftMenu",n.appendChild(v({name:"build",caption:"Build",callback:()=>{}})),n.appendChild(v({name:"tbd",caption:"TBD",callback:()=>{}})),t.appendChild(n),t.appendChild((()=>{const e=document.createElement("div");return e.className="selectionBar",Object.keys(p.buildings).map((e=>{const t=p.buildings[e],n=document.createElement("div");return n.className="selectionBarItem",n.innerHTML=`\n      <div class="selectionBarItemImage" style="background-image: url(${t.sprite})">\n      </div>\n      <div class="selectionBarItemName">\n        ${t.name}\n      </div>\n    `,n.addEventListener("click",(()=>{o.mode="build",o.modeData={buildable:t}})),n})).forEach((t=>{e.appendChild(t)})),e})());const s=e.add.dom(0,100,t);s.originX=0,s.originY=0})(e)}});class y extends Phaser.Scene{constructor(){super({key:a}),this.ui=b(this)}create(){this.ui.create()}update(){}}const g={type:Phaser.AUTO,backgroundColor:"#303030",dom:{createContainer:!0},parent:"phaser-game",scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:1280,height:720},scene:[m,h,y],physics:{default:"arcade",arcade:{debug:!1,gravity:{y:1e3}}}};window.addEventListener("load",(()=>{new Phaser.Game(g)}))}},n={};function s(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,s),i.exports}s.m=t,e=[],s.O=(t,n,a,i)=>{if(!n){var o=1/0;for(d=0;d<e.length;d++){for(var[n,a,i]=e[d],r=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(r=!1,i<o&&(o=i));if(r){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,a,i]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var a,i,[o,r,l]=n,c=0;if(o.some((t=>0!==e[t]))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(l)var d=l(s)}for(t&&t(n);c<o.length;c++)i=o[c],s.o(e,i)&&e[i]&&e[i][0](),e[o[c]]=0;return s.O(d)},n=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=s.O(void 0,[216],(()=>s(500)));a=s.O(a)})();
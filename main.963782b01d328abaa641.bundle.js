(()=>{"use strict";var e,t={978:(e,t,s)=>{s(260);const a="MainScene",n="UIScene",i="assets/tiles/green.png",r="assets/tiles/yellow.png",o="assets/buildings/house1.png",c="assets/buildings/block1.png",l={mode:"view"},d=Phaser.Input.Events;class h extends Phaser.GameObjects.Image{constructor({scene:e,x:t,y:s,zIndex:a}){super(e,t,s,i),this.originX=0,this.originY=1,this.updateDisplayOrigin(),this.setDepth(a+0),this.setInteractive({pixelPerfect:!0,alphaTolerance:1}),this.on(d.POINTER_OVER,(()=>{"build"===l.mode&&void 0===this.content&&(this.overlay=e.add.image(t,s,c),this.overlay.setOrigin(0,1),this.overlay.setAlpha(.5),this.overlay.setDepth(a+1e6))})),this.on(d.POINTER_OUT,(()=>{var e;(null===(e=this.overlay)||void 0===e?void 0:e.destroy)&&(this.overlay.destroy(),this.overlay=void 0)})),this.on(d.POINTER_DOWN,(()=>{var n;console.log("tile"),"build"===l.mode&&void 0===this.content&&(null===(n=this.overlay)||void 0===n||n.destroy(),this.overlay=void 0,this.content=e.add.image(t,s,c),this.content.setOrigin(0,1),this.content.setDepth(a+5))})),e.add.existing(this)}}const m={type:"tile"},p=[];for(let e=0;e<32;e++){p.push([]);for(let t=0;t<32;t++)p[e].push(Object.assign({},m))}console.log({map:p});class u extends Phaser.Scene{constructor(){super({key:a})}create(){this.keyBindings=(e=>{const t={};return{bindKeys:()=>{e.input.keyboard.on("keydown",(({key:e})=>{t[e]=!0})).on("keyup",(({key:e})=>{t[e]=!1})),e.input.on("wheel",((t,s,a,n,i,r)=>{n>0?e.cameras.main.zoom>.2&&(e.cameras.main.zoom-=.1):n<0&&e.cameras.main.zoom<2&&(e.cameras.main.zoom+=.1)}))},handleCameraMovement:()=>{t.w?e.cameras.main.scrollY-=10:t.s&&(e.cameras.main.scrollY+=10),t.a?e.cameras.main.scrollX-=10:t.d&&(e.cameras.main.scrollX+=10)}}})(this),this.createTiles(),this.keyBindings.bindKeys()}createTiles(){const e=this.cameras.main.width/2;p.forEach(((t,s)=>{const a=e-32*s,n=100+16*s;t.forEach(((e,t)=>{new h({scene:this,x:a+32*t,y:n+16*t,tileInfo:e,zIndex:10*(s+t+1)})}))}))}update(){this.keyBindings.handleCameraMovement()}}class v extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.image(i,i),this.load.image(r,r),this.load.image(o,o),this.load.image(c,c)}create(){this.scene.start(a),this.scene.start(n)}}const g=({name:e,caption:t,callback:s})=>{const a=document.createElement("div");return a.className="leftMenuButton",a.innerText=t,a.addEventListener("click",s),a};class y extends Phaser.Scene{constructor(){var e;super({key:n}),this.ui=(e=this,{create:()=>{const t=(()=>{const e=document.createElement("div");return e.className="leftMenu",e.appendChild(g({name:"build",caption:"Build",callback:()=>{"build"!==l.mode?l.mode="build":l.mode="view",console.log("button")}})),e.appendChild(g({name:"tbd",caption:"TBD",callback:()=>{}})),e})(),s=e.add.dom(0,100,t);s.originX=0,s.originY=0}})}create(){this.ui.create()}update(){}}const b={type:Phaser.AUTO,backgroundColor:"#303030",dom:{createContainer:!0},parent:"phaser-game",scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:1280,height:720},scene:[v,u,y],physics:{default:"arcade",arcade:{debug:!1,gravity:{y:1e3}}}};window.addEventListener("load",(()=>{new Phaser.Game(b)}))}},s={};function a(e){var n=s[e];if(void 0!==n)return n.exports;var i=s[e]={exports:{}};return t[e].call(i.exports,i,i.exports,a),i.exports}a.m=t,e=[],a.O=(t,s,n,i)=>{if(!s){var r=1/0;for(d=0;d<e.length;d++){for(var[s,n,i]=e[d],o=!0,c=0;c<s.length;c++)(!1&i||r>=i)&&Object.keys(a.O).every((e=>a.O[e](s[c])))?s.splice(c--,1):(o=!1,i<r&&(r=i));if(o){e.splice(d--,1);var l=n();void 0!==l&&(t=l)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,n,i]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var n,i,[r,o,c]=s,l=0;if(r.some((t=>0!==e[t]))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(c)var d=c(a)}for(t&&t(s);l<r.length;l++)i=r[l],a.o(e,i)&&e[i]&&e[i][0](),e[r[l]]=0;return a.O(d)},s=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var n=a.O(void 0,[216],(()=>a(978)));n=a.O(n)})();
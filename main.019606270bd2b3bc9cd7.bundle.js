(()=>{"use strict";var e,t={978:(e,t,a)=>{a(260);const s="MainScene",i="UIScene",n="assets/tiles/green.png",r="assets/tiles/yellow.png",o="assets/buildings/house1.png",c={mode:"view"},l=Phaser.Input.Events;class d extends Phaser.GameObjects.Image{constructor(e,t,a,s){super(e,t,a,n),this.originX=0,this.originY=1,this.updateDisplayOrigin(),this.setInteractive({pixelPerfect:!0,alphaTolerance:1}),this.on(l.POINTER_OVER,(()=>{"build"===c.mode&&void 0===this.content&&(this.overlay=e.add.image(t,a,o),this.overlay.originX=0,this.overlay.originY=1,this.overlay.updateDisplayOrigin(),this.overlay.alpha=.5,this.setTint(65280))})),this.on(l.POINTER_OUT,(()=>{var e;(null===(e=this.overlay)||void 0===e?void 0:e.destroy)&&(this.overlay.destroy(),this.overlay=void 0),this.clearTint()})),this.on(l.POINTER_DOWN,(()=>{var s;"build"===c.mode&&void 0===this.content&&(null===(s=this.overlay)||void 0===s||s.destroy(),this.overlay=void 0,this.content=e.add.image(t,a,o),this.content.originX=0,this.content.originY=1,this.content.updateDisplayOrigin())})),e.add.existing(this),s.type}}const h={type:"tile"},p=[];for(let e=0;e<32;e++){p.push([]);for(let t=0;t<32;t++)p[e].push(Object.assign({},h))}console.log({map:p});class m extends Phaser.Scene{constructor(){super({key:s})}create(){this.keyBindings=(e=>{const t={};return{bindKeys:()=>{e.input.keyboard.on("keydown",(({key:e})=>{t[e]=!0})).on("keyup",(({key:e})=>{t[e]=!1})),e.input.on("wheel",((t,a,s,i,n,r)=>{i>0?e.cameras.main.zoom>.2&&(e.cameras.main.zoom-=.1):i<0&&e.cameras.main.zoom<2&&(e.cameras.main.zoom+=.1)}))},handleCameraMovement:()=>{t.w?e.cameras.main.scrollY-=10:t.s&&(e.cameras.main.scrollY+=10),t.a?e.cameras.main.scrollX-=10:t.d&&(e.cameras.main.scrollX+=10)}}})(this),this.createTiles(),this.keyBindings.bindKeys()}createTiles(){const e=this.cameras.main.width/2;p.forEach(((t,a)=>{const s=e-32*a,i=100+16*a;t.forEach(((e,t)=>{new d(this,s+32*t,i+16*t,e)}))}))}update(){this.keyBindings.handleCameraMovement()}}class u extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.image(n,n),this.load.image(r,r),this.load.image(o,o)}create(){this.scene.start(s),this.scene.start(i)}}const v=({name:e,caption:t,callback:a})=>{const s=document.createElement("div");return s.className="leftMenuButton",s.innerText=t,s.addEventListener("click",a),s};class y extends Phaser.Scene{constructor(){var e;super({key:i}),this.ui=(e=this,{create:()=>{const t=(()=>{const e=document.createElement("div");return e.className="leftMenu",e.appendChild(v({name:"build",caption:"Build",callback:()=>{"build"!==c.mode?c.mode="build":c.mode="view"}})),e.appendChild(v({name:"tbd",caption:"TBD",callback:()=>{}})),e})(),a=e.add.dom(0,100,t);a.originX=0,a.originY=0}})}create(){this.ui.create()}update(){}}const g={type:Phaser.AUTO,backgroundColor:"#303030",dom:{createContainer:!0},parent:"phaser-game",scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:1280,height:720},scene:[u,m,y],physics:{default:"arcade",arcade:{debug:!1,gravity:{y:1e3}}}};window.addEventListener("load",(()=>{new Phaser.Game(g)}))}},a={};function s(e){var i=a[e];if(void 0!==i)return i.exports;var n=a[e]={exports:{}};return t[e].call(n.exports,n,n.exports,s),n.exports}s.m=t,e=[],s.O=(t,a,i,n)=>{if(!a){var r=1/0;for(d=0;d<e.length;d++){for(var[a,i,n]=e[d],o=!0,c=0;c<a.length;c++)(!1&n||r>=n)&&Object.keys(s.O).every((e=>s.O[e](a[c])))?a.splice(c--,1):(o=!1,n<r&&(r=n));if(o){e.splice(d--,1);var l=i();void 0!==l&&(t=l)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,i,n]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};s.O.j=t=>0===e[t];var t=(t,a)=>{var i,n,[r,o,c]=a,l=0;if(r.some((t=>0!==e[t]))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(c)var d=c(s)}for(t&&t(a);l<r.length;l++)n=r[l],s.o(e,n)&&e[n]&&e[n][0](),e[r[l]]=0;return s.O(d)},a=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var i=s.O(void 0,[216],(()=>s(978)));i=s.O(i)})();